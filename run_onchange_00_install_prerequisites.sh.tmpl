#!/bin/sh

{{ if eq .chezmoi.os "linux"}}
{{ if eq .chezmoi.osRelease.id "arch"}}

if [ ! -x /sbin/git ]; then sudo pacman -S --needed base-devel git; fi
if [ ! -x /sbin/go ]; then sudo pacman -S go; fi
if [ ! -x /sbin/yay ]; then
  git clone https://aur.archlinux.org/yay.git
  cd yay
  makepkg -si
fi

for app in gdb neomutt urlscan urlview tmux zsh fuzzel mako msmtp foot wofi starship alacritty swappy slurp grim mbsync-git swaylock swayidle
do
  if [ ! -x /sbin/${app} ]; then yay -SYg ${app}; fi
done

if [ ! -x /sbin/neomutt ]; then yay -SYg neomutt; fi
if [ ! -f /usr/share/peda/peda.py ]; then yay -SYg peda; fi
if [ ! -d /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh ]; then
  yay -SYg oh-my-zsh-git
fi

if [ ! -d ~/.tmux/plugins/tpm ]; then
  git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
fi

{{ end }}
{{ end }}
